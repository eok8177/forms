(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{284:function(t,e,a){"use strict";var i=a(70),n=a.n(i);e.default=n.a},285:function(t,e,a){(t.exports=a(47)(!1)).push([t.i,'\nlabel.required:after {\n    content: "*";\n    color: red;\n}\n',""])},44:function(t,e,a){"use strict";a.r(e);var i=a(13),n=a.n(i);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s={components:{SectionComponent:a(208).a},props:{form:{type:Object},formid:{type:Number},userid:{type:Number}},data:function(){return{formdata:{type:Object},submitData:{},validForm:!0,validSection:!0,files:{},entryid:"",status:"draft",redirect_url:"/"}},methods:{updateInstances:function(t,e){this.formdata.sections[t].instances=e},toggleSection:function(t){this.parseForm(t),this.formdata.sections[t].valid&&$("#"+this.formdata.sections[t].name+"_gui_body").collapse("toggle"),t>0&&this.formdata.sections[t-1].valid&&$("#"+this.formdata.sections[t-1].name+"_gui_body").collapse("hide")},Submit:function(){this.parseForm(-1),this.validForm&&this.sendFrom()},parseForm:function(t){var e=this;e.validForm=!0,e.submitData={},_.forEach(this.formdata.sections,(function(a,i){if(e.validSection=!0,t>=0&&i>t)return!1;a.isDynamic?_.forEach(a.instances,(function(t){_.forEach(t,(function(t){e.fillSubmitData(t.controls,i)}))})):_.forEach(a.rows,(function(t){e.fillSubmitData(t.controls,i)})),e.formdata.sections[i].valid=e.validSection}))},fillSubmitData:function(t,e){var a=this,i=Object.keys(a.submitData).length;_.forEach(t,(function(t){var n=!0;if("file"!=t.type&&"html"!=t.type&&($('body [name="'+t.name+'"]').removeClass("is-invalid"),t.required&&("address"==t.type||t.value||(a.validForm=!1,a.validSection=!1,n=!1,$('body [name="'+t.name+'"]').addClass("is-invalid")),"address"==t.type)))for(var s=1;s<=5;s++)$('body [name="'+t.name+s+'"]').removeClass("is-invalid"),t["show"+s]&&!t["value"+s]&&2!=s&&(a.validForm=!1,a.validSection=!1,n=!1,$('body [name="'+t.name+s+'"]').addClass("is-invalid"));if("file"==t.type&&t.value&&(a.files[t.name]={name:t.label,data:t.value}),"address"==t.type)for(s=1;s<=5;s++)t["show"+s]&&t["value"+s]&&(a.submitData=Object.assign(a.submitData,o({},i,{label:t["label"+s],value:t["value"+s],valid:n,field_id:t["label"+s]})),i++);else"file"!=t.type&&"html"!=t.type&&t.value&&(a.submitData=Object.assign(a.submitData,o({},i,{label:t.label,value:t.value,valid:n,field_id:t.fieldName})),i++);n||$("#"+a.form.sections[e].name+"_gui_body").collapse("show")}))},sendFrom:function(){var t=this;n.a.post("/api/post-form",{userid:this.userid,formid:this.formid,data:this.submitData}).then((function(e){t.entryid=e.data.entryid,t.redirect_url=e.data.redirect_url,t.status="submitted",t.SaveApps(),t.sendFiles()})).catch((function(t){return console.log(t)}))},sendFiles:function(){var t=this;_.forEach(t.files,(function(e,a){var i=new FormData;i.append("entryId",t.entryid),i.append("userid",t.userid),i.append("formId",t.formid),i.append("fieldName",e.name),i.append("file",e.data),n.a.post("/api/upload-file",i,{headers:{"Content-Type":"multipart/form-data"}})})),window.location.href=this.redirect_url},SaveApps:function(){n.a.post("/api/save-apps",{userid:this.userid,formid:this.formid,entryid:this.entryid,status:this.status,data:this.form}).then((function(t){console.log(t.data.appid)})).catch((function(t){return console.log(t)}))}},created:function(){this.formdata=this.form},mounted:function(){$("#"+this.form.sections[0].name+"_gui_body").collapse("show")}},r=a(284),l=a(50);var d=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.form?a("div",["collapse"===t.form.layout?a("div",{staticClass:"accordion"},t._l(t.form.sections,(function(t,e){return a("section-component",{key:t.name,attrs:{index:e,section:t}})})),1):t._e(),t._v(" "),a("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.Submit()}}},[t._v("Submit")]),t._v(" "),t.userid>0?a("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.SaveApps()}}},[t._v("Save & fill later")]):t._e()]):t._e()}),[],!1,(function(t){this.$style=r.default.locals||r.default}),null,null);e.default=d.exports},70:function(t,e,a){var i=a(285);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(48)(i,n);i.locals&&(t.exports=i.locals)}}]);